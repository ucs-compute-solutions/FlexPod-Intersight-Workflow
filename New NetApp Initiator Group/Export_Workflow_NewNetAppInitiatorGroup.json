[{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"NetApp storage target device.","Label":"NetApp Storage Target Datatype","Name":"NetAppStorageTargetDataType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"CustomDataTypeProperties":{"ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage target device.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[{"ConnectorAttribute":"RegisteredDevice.Moid","ConstraintAttributes":["ObjectType"],"DisplayAttributes":["Name","ManagementAddress"],"ObjectType":"workflow.TargetProperty","Selector":"/api/v1/storage/NetAppClusters?$orderby=Name","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"SupportedObjects":["storage.NetAppCluster"]}],"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"NetApp storage virtual machine name.","Label":"NetApp Storage Virtual Machine","Name":"NetAppStorageVirtualMachineNameType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Virtual Machine","Name":"StorageVirtualMachineName","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":47,"Min":1,"ObjectType":"workflow.Constraints","Regex":"[0-9A-z_][-A-z0-9._]*"},"InventorySelector":[{"DisplayAttributes":["Name"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/storage/NetAppStorageVms?$orderby=Name&$select=Name","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Name"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Remove a NetApp initiator group with storage virtual machine name and initiator group name as the inputs. On successful execution, the name of the removed initiator group is generated as output.","Label":"Remove NetApp Initiator Group","Name":"RemoveNetAppInitiatorGroup","ObjectType":"workflow.TaskDefinition","Properties":{"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageTargetDataType","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage virtual machine name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Virtual Machine","Name":"StorageVirtualMachineName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageVirtualMachineNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Initiator group name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Initiator Group","Name":"InitiatorGroupName","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":96,"Min":1,"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/storage/NetAppInitiatorGroups?$orderby=Name","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Name"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Initiator group name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Initiator Group Name","Name":"InitiatorGroupName","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":96,"Min":1,"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}],"RetryCount":5,"RetryDelay":10,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":60,"TimeoutPolicy":"Retry"},"RollbackTasks":[],"SharedScope":"shared","Tags":[{"Key":"category","Value":"Storage"},{"Key":"subcategory","Value":"NetApp"},{"Key":"platformType.NetAppActiveIqUnifiedManager","Value":"true"}],"Version":4},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Create an initiator group with storage virtual machine name, initiator group name, protocol, operating system, and initiators as the inputs. On successful execution, the initiator group name and list of initiators added are generated as outputs.","Label":"New NetApp Initiator Group","Name":"NewNetAppInitiatorGroup","ObjectType":"workflow.TaskDefinition","Properties":{"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageTargetDataType","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage virtual machine name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Virtual Machine","Name":"StorageVirtualMachineName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageVirtualMachineNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Initiator group name can be between 1 and 96 characters long. Spaces are not allowed.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Initiator Group Name","Name":"InitiatorGroupName","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":96,"Min":1,"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Initiator group protocol.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Protocol","Name":"Protocol","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[{"Label":"FCP","ObjectType":"workflow.EnumEntry","Value":"fcp"},{"Label":"iSCSI","ObjectType":"workflow.EnumEntry","Value":"iscsi"},{"Label":"Mixed","ObjectType":"workflow.EnumEntry","Value":"mixed"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Operating system for the initiator group.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Operating System","Name":"OperatingSystem","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[{"Label":"VMware","ObjectType":"workflow.EnumEntry","Value":"vmware"},{"Label":"AIX","ObjectType":"workflow.EnumEntry","Value":"aix"},{"Label":"HPUX","ObjectType":"workflow.EnumEntry","Value":"hpux"},{"Label":"Hyper-V","ObjectType":"workflow.EnumEntry","Value":"hyper_v"},{"Label":"Linux","ObjectType":"workflow.EnumEntry","Value":"linux"},{"Label":"Netware","ObjectType":"workflow.EnumEntry","Value":"netware"},{"Label":"Solaris","ObjectType":"workflow.EnumEntry","Value":"solaris"},{"Label":"OpenVMS","ObjectType":"workflow.EnumEntry","Value":"openvms"},{"Label":"Windows","ObjectType":"workflow.EnumEntry","Value":"windows"},{"Label":"Xen","ObjectType":"workflow.EnumEntry","Value":"xen"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"},"Required":true},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Initiators to add to the new initiator group. An example of a valid FC WWPN is \"01:02:03:04:0a:0b:0c:0d\". Examples of valid iSCSI names are \"iqn.1995-08.com.example:string\" and \"eui.0123456789abcdef\".","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Initiators","Max":500,"Min":1,"Name":"InitiatorList","ObjectType":"workflow.ArrayDataType"}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Initiator group name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Initiator Group Name","Name":"InitiatorGroupName","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":96,"Min":1,"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"List of initiators.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Initiators","Max":500,"Min":1,"Name":"InitiatorList","ObjectType":"workflow.ArrayDataType"}],"RetryCount":5,"RetryDelay":10,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":60,"TimeoutPolicy":"Retry"},"RollbackTasks":[{"CatalogMoid":"shared","Description":"Remove NetApp initiator group.","InputParameters":{"InitiatorGroupName":"${task.input.InitiatorGroupName}","StorageDevice":"${task.input.StorageDevice}","StorageVirtualMachineName":"${task.input.StorageVirtualMachineName}"},"Name":"RemoveNetAppInitiatorGroup","ObjectType":"workflow.RollbackTask","Version":4}],"SharedScope":"shared","Tags":[{"Key":"category","Value":"Storage"},{"Key":"subcategory","Value":"NetApp"},{"Key":"platformType.NetAppActiveIqUnifiedManager","Value":"true"}],"Version":4},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.WorkflowDefinition","DefaultVersion":true,"Description":"Create a new NetApp initiator group.","InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageTargetDataType","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage virtual machine name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Virtual Machine","Name":"StorageVirtualMachineName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageVirtualMachineNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Initiator group name can be between 1 and 96 characters long. Spaces are not allowed.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Initiator Group Name","Name":"InitiatorGroupName","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":96,"Min":1,"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Initiator group protocol.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Protocol","Name":"Protocol","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[{"Label":"FCP","ObjectType":"workflow.EnumEntry","Value":"fcp"},{"Label":"iSCSI","ObjectType":"workflow.EnumEntry","Value":"iscsi"},{"Label":"Mixed","ObjectType":"workflow.EnumEntry","Value":"mixed"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"}},{"Default":{"ObjectType":"workflow.DefaultValue","Override":true,"Value":"vmware"},"Description":"Operating system for the initiator group.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Operating System","Name":"OperatingSystem","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[{"Label":"VMware","ObjectType":"workflow.EnumEntry","Value":"vmware"},{"Label":"AIX","ObjectType":"workflow.EnumEntry","Value":"aix"},{"Label":"HPUX","ObjectType":"workflow.EnumEntry","Value":"hpux"},{"Label":"Hyper-V","ObjectType":"workflow.EnumEntry","Value":"hyper_v"},{"Label":"Linux","ObjectType":"workflow.EnumEntry","Value":"linux"},{"Label":"Netware","ObjectType":"workflow.EnumEntry","Value":"netware"},{"Label":"Solaris","ObjectType":"workflow.EnumEntry","Value":"solaris"},{"Label":"OpenVMS","ObjectType":"workflow.EnumEntry","Value":"openvms"},{"Label":"Windows","ObjectType":"workflow.EnumEntry","Value":"windows"},{"Label":"Xen","ObjectType":"workflow.EnumEntry","Value":"xen"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"},"Required":true},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Initiators to add to the new initiator group. An example of a valid FC WWPN is \"01:02:03:04:0a:0b:0c:0d\". Examples of valid iSCSI names are \"iqn.1995-08.com.example:string\" and \"eui.0123456789abcdef\".","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Initiator","Max":500,"Min":1,"Name":"InitiatorList","ObjectType":"workflow.ArrayDataType"}],"InputParameterSet":[],"Label":"New NetApp Initiator Group","Name":"NewNetAppInitiatorGroup","ObjectType":"workflow.WorkflowDefinition","OutputDefinition":[],"Properties":{"ObjectType":"workflow.WorkflowProperties","SupportStatus":"Supported"},"SharedScope":"user","Tags":[{"Key":"category","Value":"Storage"}],"Tasks":[{"Name":"StartTask","NextTask":"NewNetAppInitiatorGroup1","ObjectType":"workflow.StartTask"},{"Name":"SuccessEndTask","ObjectType":"workflow.SuccessEndTask"},{"Name":"FailureEndTask","ObjectType":"workflow.FailureEndTask"},{"CatalogMoid":"shared","Description":"Create an initiator group with storage virtual machine name, initiator group name, protocol, operating system, and initiators as the inputs. On successful execution, the initiator group name and list of initiators added are generated as outputs.","InputParameters":{"InitiatorGroupName":"${workflow.input.InitiatorGroupName}","InitiatorList":"${workflow.input.InitiatorList}","OperatingSystem":"${workflow.input.OperatingSystem}","Protocol":"${workflow.input.Protocol}","StorageDevice":"${workflow.input.StorageDevice}","StorageVirtualMachineName":"${workflow.input.StorageVirtualMachineName}"},"Label":"New NetApp Initiator Group","Name":"NewNetAppInitiatorGroup1","ObjectType":"workflow.WorkerTask","OnSuccess":"SuccessEndTask","TaskDefinitionName":"NewNetAppInitiatorGroup","Version":4}],"UiInputFilters":[{"Filters":["Ancestors.Moid eq '${StorageDevice.Moid}'"],"Name":"StorageVirtualMachineName","ObjectType":"workflow.UiInputFilter"}],"UiRenderingData":{"Positions":[{"Name":"StartTask","X":263.5,"Y":75.5},{"Name":"SuccessEndTask","X":263.5,"Y":246},{"Name":"FailureEndTask","X":406.5,"Y":246},{"Name":"NewNetAppInitiatorGroup1","X":178.8863525390625,"Y":147.38626098632812}]},"VariableDefinition":[],"Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/WorkflowDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.ErrorResponseHandler","Name":"NetAppApiErrorResponseHandler","ObjectType":"workflow.ErrorResponseHandler","Parameters":[{"AcceptSingleValue":true,"ComplexType":"Error","ItemType":"complex","Name":"Errors","ObjectType":"content.Parameter","Path":"$","Type":"collection"}],"PlatformType":"NetAppActiveIqUnifiedManager","SharedScope":"shared","Types":[{"Name":"Error","ObjectType":"content.ComplexType","Parameters":[{"ItemType":"simple","Name":"Msg","ObjectType":"content.Parameter","Path":"$.error.message","Type":"simple"},{"ItemType":"simple","Name":"ErrorCode","ObjectType":"content.Parameter","Path":"$.error.code","Type":"simple"}]}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/ErrorResponseHandlers","Verb":"POST"},{"Body":{"Batch":[{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetClusterUuid","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.GetClusterUuid.output.HttpStatusCode 200}}","Message":"Get Cluster UUID successful.","ObjectType":"workflow.Outcome","Type":"Success"},{"Condition":"{{ne .global.GetClusterUuid.output.HttpStatusCode 200}}","Message":"Get Cluster UUID failed.","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"Uuid","ObjectType":"content.Parameter","Path":"$.Uuid","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Local","Url":"/v1/storage/NetAppClusters/{{.global.task.input.StorageDevice.Moid}}?$select=Uuid"},{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetNetAppiGroupDetails","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.GetNetAppiGroupDetails.output.HttpStatusCode 400) (le .global.GetNetAppiGroupDetails.output.HttpStatusCode 499)}}","Message":"{{if .global.GetNetAppiGroupDetails.output.Errors}}{{$err := (index .global.GetNetAppiGroupDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppiGroupDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.GetNetAppiGroupDetails.output.HttpStatusCode 500)}}","Message":"{{if .global.GetNetAppiGroupDetails.output.Errors}}{{$err := (index .global.GetNetAppiGroupDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppiGroupDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.GetNetAppiGroupDetails.output.HttpStatusCode 501) (le .global.GetNetAppiGroupDetails.output.HttpStatusCode 599)}}","Message":"{{if .global.GetNetAppiGroupDetails.output.Errors}}{{$err := (index .global.GetNetAppiGroupDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppiGroupDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{(eq .global.GetNetAppiGroupDetails.output.HttpStatusCode 200)}}","Message":"Initiator group details retrieved successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"iGroupUuid","ObjectType":"content.Parameter","Path":"$.records[0].uuid","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/protocols/san/igroups?name={{.global.task.input.InitiatorGroupName}}&svm.name={{.global.task.input.StorageVirtualMachineName}}"},{"ContentType":"json","EndpointRequestType":"Internal","Method":"DELETE","Name":"RemoveInitiatorGroup","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.RemoveInitiatorGroup.output.HttpStatusCode 400) (le .global.RemoveInitiatorGroup.output.HttpStatusCode 499)}}","Message":"{{if .global.RemoveInitiatorGroup.output.Errors}}{{$err := (index .global.RemoveInitiatorGroup.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.RemoveInitiatorGroup.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.RemoveInitiatorGroup.output.HttpStatusCode 500)}}","Message":"{{if .global.RemoveInitiatorGroup.output.Errors}}{{$err := (index .global.RemoveInitiatorGroup.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.RemoveInitiatorGroup.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.RemoveInitiatorGroup.output.HttpStatusCode 501) (le .global.RemoveInitiatorGroup.output.HttpStatusCode 599)}}","Message":"{{if .global.RemoveInitiatorGroup.output.Errors}}{{$err := (index .global.RemoveInitiatorGroup.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.RemoveInitiatorGroup.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{(eq .global.RemoveInitiatorGroup.output.HttpStatusCode 200)}}","Message":"Initiator group removed successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/protocols/san/igroups/{{.global.GetNetAppiGroupDetails.output.iGroupUuid}}"},{"Body":"{\"Type\":\"storage.NetAppInitiatorGroup\",\"Queries\": [{\"Uuid\": \"{{.global.GetNetAppiGroupDetails.output.iGroupUuid}}\", \"ClusterUuid\":\"{{.global.GetClusterUuid.output.Uuid}}\"}],\"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateInventory","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateInventory.output.HttpStatusCode 200}}","Message":"Initiator group removed successfully.","ObjectType":"workflow.Outcome","Type":"Success"},{"Condition":"{{ne .global.UpdateInventory.output.HttpStatusCode 200}}","Message":"{{.global.UpdateInventory.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","TargetType":"Local","Url":"/v1/task/NetAppScopedInventories"}],"CancelAction":[],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints","TargetDataType":{"ObjectType":"storage.NetAppCluster"}},"Description":"Remove NetApp initiator group.","ErrorResponseHandler":{"ObjectType":"workflow.ErrorResponseHandler","Selector":"Name eq \"NetAppApiErrorResponseHandler\""},"Name":"RemoveNetAppInitiatorGroup","ObjectType":"workflow.BatchApiExecutor","Output":{"InitiatorGroupName":"{{.global.task.input.InitiatorGroupName}}"},"RetryFromFailedApi":true,"SharedScope":"shared","SkipOnCondition":"{{if ne .global.task.input.StorageDevice.ObjectType \"storage.NetAppCluster\"}} true {{end}}","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"RemoveNetAppInitiatorGroup\" and Version eq 4"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetClusterUuid","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.GetClusterUuid.output.HttpStatusCode 200}}","Message":"Get Cluster UUID successful.","ObjectType":"workflow.Outcome","Type":"Success"},{"Condition":"{{ne .global.GetClusterUuid.output.HttpStatusCode 200}}","Message":"Get Cluster UUID failed.","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"Uuid","ObjectType":"content.Parameter","Path":"$.Uuid","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Local","Url":"/v1/storage/NetAppClusters/{{.global.task.input.StorageDevice.Moid}}?$select=Uuid"},{"Body":"{\"svm\": {\"name\": \"{{.global.task.input.StorageVirtualMachineName}}\"}, \"name\": \"{{.global.task.input.InitiatorGroupName}}\", \"os_type\": \"{{.global.task.input.OperatingSystem}}\" {{if (.global.task.input.Protocol) }} ,\"protocol\": \"{{.global.task.input.Protocol}}\" {{end}} {{if (.global.task.input.InitiatorList) }} ,\"initiators\": [{{range $index, $initiator:= .global.task.input.InitiatorList}} {{if $index}},{{end}}{\"name\": \"{{$initiator}}\"} {{end}}]  {{end}}}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"NewInitiatorGroup","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.NewInitiatorGroup.output.HttpStatusCode 400) (le .global.NewInitiatorGroup.output.HttpStatusCode 499)}}","Message":"{{if .global.NewInitiatorGroup.output.Errors}}{{$err := (index .global.NewInitiatorGroup.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.NewInitiatorGroup.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.NewInitiatorGroup.output.HttpStatusCode 500)}}","Message":"{{if .global.NewInitiatorGroup.output.Errors}}{{$err := (index .global.NewInitiatorGroup.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.NewInitiatorGroup.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.NewInitiatorGroup.output.HttpStatusCode 501) (le .global.NewInitiatorGroup.output.HttpStatusCode 599)}}","Message":"{{if .global.NewInitiatorGroup.output.Errors}}{{$err := (index .global.NewInitiatorGroup.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.NewInitiatorGroup.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{(eq .global.NewInitiatorGroup.output.HttpStatusCode 201)}}","Message":"Initiator group created successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"InitiatorGroupName","ObjectType":"content.Parameter","Path":"$.records[0].name","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"iGroupUuid","ObjectType":"content.Parameter","Path":"$.records[0].uuid","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"InitiatorList","ObjectType":"content.Parameter","Path":"$.records[0].initiators[*].name","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/protocols/san/igroups?return_records=true"},{"Body":"{\"Type\":\"storage.NetAppInitiatorGroup\",\"Queries\": [{\"Uuid\": \"{{.global.NewInitiatorGroup.output.iGroupUuid}}\", \"ClusterUuid\":\"{{.global.GetClusterUuid.output.Uuid}}\"}],\"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateInventory","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateInventory.output.HttpStatusCode 200}}","Message":"Initiator group created successfully","ObjectType":"workflow.Outcome","Type":"Success"},{"Condition":"{{ne .global.UpdateInventory.output.HttpStatusCode 200}}","Message":"{{.global.UpdateInventory.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","TargetType":"Local","Url":"/v1/task/NetAppScopedInventories"}],"CancelAction":[],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints","TargetDataType":{"ObjectType":"storage.NetAppCluster"}},"Description":"New NetApp initiator group.","ErrorResponseHandler":{"ObjectType":"workflow.ErrorResponseHandler","Selector":"Name eq \"NetAppApiErrorResponseHandler\""},"Name":"NewNetAppInitiatorGroup","ObjectType":"workflow.BatchApiExecutor","Output":{"InitiatorGroupName":"{{.global.NewInitiatorGroup.output.InitiatorGroupName}}","InitiatorList":"{{.global.task.input.InitiatorList| ToJson}}"},"RetryFromFailedApi":true,"SharedScope":"shared","SkipOnCondition":"{{if ne .global.task.input.StorageDevice.ObjectType \"storage.NetAppCluster\"}} true {{end}}","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"NewNetAppInitiatorGroup\" and Version eq 4"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"}]