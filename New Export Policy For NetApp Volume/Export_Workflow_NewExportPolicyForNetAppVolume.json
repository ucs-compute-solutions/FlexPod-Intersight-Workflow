[{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"NetApp storage target device.","Label":"NetApp Storage Target Datatype","Name":"NetAppStorageTargetDataType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"CustomDataTypeProperties":{"ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage target device.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[{"ConnectorAttribute":"RegisteredDevice.Moid","ConstraintAttributes":["ObjectType"],"DisplayAttributes":["Name","ManagementAddress"],"ObjectType":"workflow.TargetProperty","Selector":"/api/v1/storage/NetAppClusters?$orderby=Name","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"SupportedObjects":["storage.NetAppCluster"]}],"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"NetApp storage virtual machine name.","Label":"NetApp Storage Virtual Machine","Name":"NetAppStorageVirtualMachineNameType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Virtual Machine","Name":"StorageVirtualMachineName","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":47,"Min":1,"ObjectType":"workflow.Constraints","Regex":"[0-9A-z_][-A-z0-9._]*"},"InventorySelector":[{"DisplayAttributes":["Name"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/storage/NetAppStorageVms?$orderby=Name&$select=Name","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Name"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"NetApp volume name.","Label":"NetApp Volume","Name":"NetAppVolumeNameType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume Name","Name":"VolumeName","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":197,"Min":1,"ObjectType":"workflow.Constraints","Regex":"[A-z][_A-z0-9]*"},"InventorySelector":[{"DisplayAttributes":["Name"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/storage/NetAppVolumes?$orderby=Name","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Name"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"NetApp export policy name.","Label":"NetApp Export Policy Name","Name":"NetAppExportPolicyNameType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Export policy name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Export Policy Name","Name":"ExportPolicyName","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":254,"Min":1,"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/storage/NetAppExportPolicies?$apply=groupby((Name),aggregate($count as count))&$orderby=Name","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Name"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Remove an export policy with storage virtual machine name and export policy name as the inputs. On successful execution, the name of the export policy removed is generated as output.","Label":"Remove NetApp Export Policy","Name":"RemoveNetAppExportPolicy","ObjectType":"workflow.TaskDefinition","Properties":{"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageTargetDataType","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage virtual machine name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Virtual Machine","Name":"StorageVirtualMachineName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageVirtualMachineNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Export policy name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Export Policy","Name":"ExportPolicyName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppExportPolicyNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Export Policy","Name":"ExportPolicyName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppExportPolicyNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true}],"RetryCount":5,"RetryDelay":10,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":60,"TimeoutPolicy":"Retry"},"RollbackTasks":[],"SharedScope":"shared","Tags":[{"Key":"category","Value":"Storage"},{"Key":"subcategory","Value":"NetApp"},{"Key":"platformType.NetAppActiveIqUnifiedManager","Value":"true"}],"Version":2},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Create an export policy with storage virtual machine name, export policy name, list of protocols, client match list, superuser security type, list of read-only export policy rules, and list of read-write export policy rules as the inputs. On successful execution, the name of the export policy created is generated as output.","Label":"New NetApp Export Policy","Name":"NewNetAppExportPolicy","ObjectType":"workflow.TaskDefinition","Properties":{"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageTargetDataType","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage virtual machine name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Virtual Machine","Name":"StorageVirtualMachineName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageVirtualMachineNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Export policy name can be between 1 and 254 characters long.","DisplayMeta":{"InventorySelector":false,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Export Policy Name","Name":"ExportPolicyName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppExportPolicyNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[{"Label":"Any","ObjectType":"workflow.EnumEntry","Value":"any"},{"Label":"NFS3","ObjectType":"workflow.EnumEntry","Value":"nfs3"},{"Label":"NFS4","ObjectType":"workflow.EnumEntry","Value":"nfs4"},{"Label":"NFS","ObjectType":"workflow.EnumEntry","Value":"nfs"},{"Label":"Flexcache","ObjectType":"workflow.EnumEntry","Value":"flexcache"},{"Label":"CIFS","ObjectType":"workflow.EnumEntry","Value":"cifs"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"}},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"List of protocols for which you want to apply the export rule.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Export Policy Protocols","Max":500,"Min":1,"Name":"ExportPolicyProtocols","ObjectType":"workflow.ArrayDataType","Required":true},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"List of the match strings specifying the client or clients to which the export rule applies.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Client Match List","Max":500,"Min":1,"Name":"ClientMatchList","ObjectType":"workflow.ArrayDataType","Required":true},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[{"Label":"sys","ObjectType":"workflow.EnumEntry","Value":"sys"},{"Label":"krb5","ObjectType":"workflow.EnumEntry","Value":"krb5"},{"Label":"krb5i","ObjectType":"workflow.EnumEntry","Value":"krb5i"},{"Label":"krb5p","ObjectType":"workflow.EnumEntry","Value":"krb5p"},{"Label":"ntlm","ObjectType":"workflow.EnumEntry","Value":"ntlm"},{"Label":"any","ObjectType":"workflow.EnumEntry","Value":"any"},{"Label":"none","ObjectType":"workflow.EnumEntry","Value":"none"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"}},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Specifies a security type for superuser access to files.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Superuser Security Type","Max":500,"Min":1,"Name":"SuperuserSecurityType","ObjectType":"workflow.ArrayDataType","Required":true},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[{"Label":"sys","ObjectType":"workflow.EnumEntry","Value":"sys"},{"Label":"krb5","ObjectType":"workflow.EnumEntry","Value":"krb5"},{"Label":"krb5i","ObjectType":"workflow.EnumEntry","Value":"krb5i"},{"Label":"krb5p","ObjectType":"workflow.EnumEntry","Value":"krb5p"},{"Label":"ntlm","ObjectType":"workflow.EnumEntry","Value":"ntlm"},{"Label":"any","ObjectType":"workflow.EnumEntry","Value":"any"},{"Label":"none","ObjectType":"workflow.EnumEntry","Value":"none"},{"Label":"never","ObjectType":"workflow.EnumEntry","Value":"never"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"}},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"List of read-only export policy rules. This specifies the security type for read-only access to volumes that use the export rule.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Read-only Policy Rules","Max":500,"Min":1,"Name":"ReadOnlyPolicyRules","ObjectType":"workflow.ArrayDataType","Required":true},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[{"Label":"sys","ObjectType":"workflow.EnumEntry","Value":"sys"},{"Label":"krb5","ObjectType":"workflow.EnumEntry","Value":"krb5"},{"Label":"krb5i","ObjectType":"workflow.EnumEntry","Value":"krb5i"},{"Label":"krb5p","ObjectType":"workflow.EnumEntry","Value":"krb5p"},{"Label":"ntlm","ObjectType":"workflow.EnumEntry","Value":"ntlm"},{"Label":"any","ObjectType":"workflow.EnumEntry","Value":"any"},{"Label":"none","ObjectType":"workflow.EnumEntry","Value":"none"},{"Label":"never","ObjectType":"workflow.EnumEntry","Value":"never"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"}},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"List of read-write export policy rules. This specifies the security type for read-write access to volumes that use the export rule.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Read-write Policy Rules","Max":500,"Min":1,"Name":"ReadWritePolicyRules","ObjectType":"workflow.ArrayDataType","Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Export Policy","Name":"ExportPolicyName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppExportPolicyNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true}],"RetryCount":5,"RetryDelay":10,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":60,"TimeoutPolicy":"Retry"},"RollbackTasks":[{"CatalogMoid":"shared","Description":"Remove an export policy.","InputParameters":{"ExportPolicyName":"${task.output.ExportPolicyName}","StorageDevice":"${task.input.StorageDevice}","StorageVirtualMachineName":"${task.input.StorageVirtualMachineName}"},"Name":"RemoveNetAppExportPolicy","ObjectType":"workflow.RollbackTask","Version":2}],"SharedScope":"shared","Tags":[{"Key":"category","Value":"Storage"},{"Key":"subcategory","Value":"NetApp"},{"Key":"platformType.NetAppActiveIqUnifiedManager","Value":"true"}],"Version":2},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Add an export policy to a volume with storage virtual machine name, volume name, and export policy name as the inputs. On successful execution, volume name, previous export policy name, and added export policy name are generated as outputs.","Label":"Add Export Policy to NetApp Volume","Name":"AddExportPolicyToNetAppVolume","ObjectType":"workflow.TaskDefinition","Properties":{"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageTargetDataType","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage virtual machine name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Virtual Machine","Name":"StorageVirtualMachineName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageVirtualMachineNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Volume name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume","Name":"VolumeName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppVolumeNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Export policy name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Export Policy","Name":"ExportPolicyName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppExportPolicyNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume","Name":"VolumeName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppVolumeNameType","ObjectType":"workflow.CustomDataProperty"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Previous Export Policy","Name":"PreviousExportPolicyName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppExportPolicyNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Added Export Policy","Name":"ExportPolicyName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppExportPolicyNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true}],"RetryCount":5,"RetryDelay":10,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":60,"TimeoutPolicy":"Retry"},"RollbackTasks":[{"CatalogMoid":"shared","Description":"Add an export policy to a volume.","InputParameters":{"ExportPolicyName":"${task.output.PreviousExportPolicyName}","StorageDevice":"${task.input.StorageDevice}","StorageVirtualMachineName":"${task.input.StorageVirtualMachineName}","VolumeName":"${task.input.VolumeName}"},"Name":"AddExportPolicyToNetAppVolume","ObjectType":"workflow.RollbackTask","Version":1}],"SharedScope":"shared","Tags":[{"Key":"category","Value":"Storage"},{"Key":"subcategory","Value":"NetApp"},{"Key":"platformType.NetAppActiveIqUnifiedManager","Value":"true"}],"Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.WorkflowDefinition","DefaultVersion":true,"Description":"Create an export policy and add the policy to a NetApp volume.","InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageTargetDataType","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage virtual machine name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Virtual Machine","Name":"StorageVirtualMachineName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageVirtualMachineNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Volume name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume","Name":"VolumeName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppVolumeNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Export policy name can be between 1 and 254 characters long.","DisplayMeta":{"InventorySelector":false,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Export Policy Name","Name":"ExportPolicyName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppExportPolicyNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[{"Label":"Any","ObjectType":"workflow.EnumEntry","Value":"any"},{"Label":"NFS3","ObjectType":"workflow.EnumEntry","Value":"nfs3"},{"Label":"NFS4","ObjectType":"workflow.EnumEntry","Value":"nfs4"},{"Label":"NFS","ObjectType":"workflow.EnumEntry","Value":"nfs"},{"Label":"Flexcache","ObjectType":"workflow.EnumEntry","Value":"flexcache"},{"Label":"CIFS","ObjectType":"workflow.EnumEntry","Value":"cifs"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"}},"Default":{"ObjectType":"workflow.DefaultValue","Override":true,"Value":["nfs"]},"Description":"List of protocols for which you want to apply the export rule.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Export Policy Protocols","Max":500,"Min":1,"Name":"ExportPolicyProtocols","ObjectType":"workflow.ArrayDataType","Required":true},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"List of the match strings specifying the client or clients to which the export rule applies.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Client Match List","Max":500,"Min":1,"Name":"ClientMatchList","ObjectType":"workflow.ArrayDataType","Required":true},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[{"Label":"sys","ObjectType":"workflow.EnumEntry","Value":"sys"},{"Label":"krb5","ObjectType":"workflow.EnumEntry","Value":"krb5"},{"Label":"krb5i","ObjectType":"workflow.EnumEntry","Value":"krb5i"},{"Label":"krb5p","ObjectType":"workflow.EnumEntry","Value":"krb5p"},{"Label":"ntlm","ObjectType":"workflow.EnumEntry","Value":"ntlm"},{"Label":"any","ObjectType":"workflow.EnumEntry","Value":"any"},{"Label":"none","ObjectType":"workflow.EnumEntry","Value":"none"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"}},"Default":{"ObjectType":"workflow.DefaultValue","Override":true,"Value":["sys"]},"Description":"Specifies security type(s) for superuser access to files.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Superuser Security Type","Max":500,"Min":1,"Name":"SuperuserSecurityType","ObjectType":"workflow.ArrayDataType","Required":true},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[{"Label":"sys","ObjectType":"workflow.EnumEntry","Value":"sys"},{"Label":"krb5","ObjectType":"workflow.EnumEntry","Value":"krb5"},{"Label":"krb5i","ObjectType":"workflow.EnumEntry","Value":"krb5i"},{"Label":"krb5p","ObjectType":"workflow.EnumEntry","Value":"krb5p"},{"Label":"ntlm","ObjectType":"workflow.EnumEntry","Value":"ntlm"},{"Label":"any","ObjectType":"workflow.EnumEntry","Value":"any"},{"Label":"none","ObjectType":"workflow.EnumEntry","Value":"none"},{"Label":"never","ObjectType":"workflow.EnumEntry","Value":"never"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"}},"Default":{"ObjectType":"workflow.DefaultValue","Override":true,"Value":["sys"]},"Description":"Specifies security type(s) for read-only access to volumes that use the export rule.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Read-only Policy Rules","Max":500,"Min":1,"Name":"ReadOnlyPolicyRules","ObjectType":"workflow.ArrayDataType","Required":true},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[{"Label":"sys","ObjectType":"workflow.EnumEntry","Value":"sys"},{"Label":"krb5","ObjectType":"workflow.EnumEntry","Value":"krb5"},{"Label":"krb5i","ObjectType":"workflow.EnumEntry","Value":"krb5i"},{"Label":"krb5p","ObjectType":"workflow.EnumEntry","Value":"krb5p"},{"Label":"ntlm","ObjectType":"workflow.EnumEntry","Value":"ntlm"},{"Label":"any","ObjectType":"workflow.EnumEntry","Value":"any"},{"Label":"none","ObjectType":"workflow.EnumEntry","Value":"none"},{"Label":"never","ObjectType":"workflow.EnumEntry","Value":"never"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"}},"Default":{"ObjectType":"workflow.DefaultValue","Override":true,"Value":["sys"]},"Description":"Specifies security type(s) for read-write access to volumes that use the export rule.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Read-write Policy Rules","Max":500,"Min":1,"Name":"ReadWritePolicyRules","ObjectType":"workflow.ArrayDataType","Required":true}],"InputParameterSet":[],"Label":"New Export Policy for NetApp Volume","Name":"NewExportPolicyForNetAppVolume","ObjectType":"workflow.WorkflowDefinition","OutputDefinition":[],"Properties":{"ObjectType":"workflow.WorkflowProperties","SupportStatus":"Supported"},"SharedScope":"user","Tags":[{"Key":"category","Value":"Storage"}],"Tasks":[{"Name":"StartTask","NextTask":"NewNetAppExportPolicy","ObjectType":"workflow.StartTask"},{"Name":"SuccessEndTask","ObjectType":"workflow.SuccessEndTask"},{"Name":"FailureEndTask","ObjectType":"workflow.FailureEndTask"},{"CatalogMoid":"shared","Description":"Create an export policy with storage virtual machine name, export policy name, list of protocols, client match list, superuser security type, list of read-only export policy rules, and list of read-write export policy rules as the inputs. On successful execution, the name of the export policy created is generated as output.","InputParameters":{"ClientMatchList":"${workflow.input.ClientMatchList}","ExportPolicyName":"${workflow.input.ExportPolicyName}","ExportPolicyProtocols":"${workflow.input.ExportPolicyProtocols}","ReadOnlyPolicyRules":"${workflow.input.ReadOnlyPolicyRules}","ReadWritePolicyRules":"${workflow.input.ReadWritePolicyRules}","StorageDevice":"${workflow.input.StorageDevice}","StorageVirtualMachineName":"${workflow.input.StorageVirtualMachineName}","SuperuserSecurityType":"${workflow.input.SuperuserSecurityType}"},"Label":"New NetApp Export Policy","Name":"NewNetAppExportPolicy","ObjectType":"workflow.WorkerTask","OnSuccess":"AddExportPolicyToNetAppVolume","TaskDefinitionName":"NewNetAppExportPolicy","Version":2},{"CatalogMoid":"shared","Description":"Add an export policy to a volume with storage virtual machine name, volume name, and export policy name as the inputs. On successful execution, volume name, previous export policy name, and added export policy name are generated as outputs.","InputParameters":{"ExportPolicyName":"${NewNetAppExportPolicy.output.ExportPolicyName}","StorageDevice":"${workflow.input.StorageDevice}","StorageVirtualMachineName":"${workflow.input.StorageVirtualMachineName}","VolumeName":"${workflow.input.VolumeName}"},"Label":"Add Export Policy to NetApp Volume","Name":"AddExportPolicyToNetAppVolume","ObjectType":"workflow.WorkerTask","OnSuccess":"SuccessEndTask","TaskDefinitionName":"AddExportPolicyToNetAppVolume","Version":1}],"UiInputFilters":[{"Filters":["Array.Moid eq '${StorageDevice.Moid}'"],"Name":"StorageVirtualMachineName","ObjectType":"workflow.UiInputFilter"},{"Filters":["Tenant.Moid eq '${StorageVirtualMachineName.Moid}'"],"Name":"VolumeName","ObjectType":"workflow.UiInputFilter"}],"UiRenderingData":{"PDModesMeta":{"StorageVirtualMachineName":"simple","VolumeName":"simple"},"Positions":[{"Name":"StartTask","X":263.5,"Y":75},{"Name":"SuccessEndTask","X":263.5,"Y":344},{"Name":"FailureEndTask","X":405.5,"Y":344},{"Name":"NewNetAppExportPolicy","X":178.5,"Y":146},{"Name":"AddExportPolicyToNetAppVolume","X":178.5,"Y":245}]},"VariableDefinition":[],"Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/WorkflowDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.ErrorResponseHandler","Name":"NetAppApiErrorResponseHandler","ObjectType":"workflow.ErrorResponseHandler","Parameters":[{"AcceptSingleValue":true,"ComplexType":"Error","ItemType":"complex","Name":"Errors","ObjectType":"content.Parameter","Path":"$","Type":"collection"}],"PlatformType":"NetAppActiveIqUnifiedManager","SharedScope":"shared","Types":[{"Name":"Error","ObjectType":"content.ComplexType","Parameters":[{"ItemType":"simple","Name":"Msg","ObjectType":"content.Parameter","Path":"$.error.message","Type":"simple"},{"ItemType":"simple","Name":"ErrorCode","ObjectType":"content.Parameter","Path":"$.error.code","Type":"simple"}]}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/ErrorResponseHandlers","Verb":"POST"},{"Body":{"Batch":[{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetClusterUuid","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.GetClusterUuid.output.HttpStatusCode 200}}","Message":"Get Cluster UUID successful.","ObjectType":"workflow.Outcome"},{"Condition":"{{ne .global.GetClusterUuid.output.HttpStatusCode 200}}","Message":"Get Cluster UUID failed.","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"Uuid","ObjectType":"content.Parameter","Path":"$.Uuid","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Local","Url":"/v1/storage/NetAppClusters/{{.global.task.input.StorageDevice.Moid}}?$select=Uuid"},{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetNetAppExportPolicy","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.GetNetAppExportPolicy.output.HttpStatusCode 400)  (le .global.GetNetAppExportPolicy.output.HttpStatusCode 499)}}","Message":"{{if .global.GetNetAppExportPolicy.output.Errors}}{{$err := (index .global.GetNetAppExportPolicy.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppExportPolicy.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.GetNetAppExportPolicy.output.HttpStatusCode 500)}}","Message":"{{if .global.GetNetAppExportPolicy.output.Errors}}{{$err := (index .global.GetNetAppExportPolicy.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppExportPolicy.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.GetNetAppExportPolicy.output.HttpStatusCode 501)  (le .global.GetNetAppExportPolicy.output.HttpStatusCode 599)}}","Message":"{{if .global.GetNetAppExportPolicy.output.Errors}}{{$err := (index .global.GetNetAppExportPolicy.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppExportPolicy.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{ and (eq .global.GetNetAppExportPolicy.output.HttpStatusCode 200) (not .global.GetNetAppExportPolicy.output.ExportPolicyName) }}","Message":"No export policy named '{{.global.task.input.ExportPolicyName}}' found.","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.GetNetAppExportPolicy.output.HttpStatusCode 200)}}","Message":"Export policy retrieved successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"ExportPolicyName","ObjectType":"content.Parameter","Path":"$.records[0].name","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"ExportPolicyId","ObjectType":"content.Parameter","Path":"$.records[0].id","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"NumberOfRecord","ObjectType":"content.Parameter","Path":"$.num_records","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/protocols/nfs/export-policies?name={{.global.task.input.ExportPolicyName}}&svm.name={{.global.task.input.StorageVirtualMachineName}}"},{"ContentType":"json","EndpointRequestType":"Internal","Method":"DELETE","Name":"RemoveNetAppExportPolicy","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.RemoveNetAppExportPolicy.output.HttpStatusCode 400)  (le .global.RemoveNetAppExportPolicy.output.HttpStatusCode 499)}}","Message":"{{if .global.RemoveNetAppExportPolicy.output.Errors}}{{$err := (index .global.RemoveNetAppExportPolicy.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.RemoveNetAppExportPolicy.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.RemoveNetAppExportPolicy.output.HttpStatusCode 500)}}","Message":"{{if .global.RemoveNetAppExportPolicy.output.Errors}}{{$err := (index .global.RemoveNetAppExportPolicy.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.RemoveNetAppExportPolicy.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.RemoveNetAppExportPolicy.output.HttpStatusCode 501)  (le .global.RemoveNetAppExportPolicy.output.HttpStatusCode 599)}}","Message":"{{if .global.RemoveNetAppExportPolicy.output.Errors}}{{$err := (index .global.RemoveNetAppExportPolicy.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.RemoveNetAppExportPolicy.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{(eq .global.RemoveNetAppExportPolicy.output.HttpStatusCode 200)}}","Message":"Export policy removed successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/protocols/nfs/export-policies/{{Ftoi .global.GetNetAppExportPolicy.output.ExportPolicyId}}"},{"Body":"{\"Type\":\"storage.NetAppExportPolicy\",\"Queries\": [{\"PolicyId\": \"{{Ftoi .global.GetNetAppExportPolicy.output.ExportPolicyId}}\", \"ClusterUuid\": \"{{.global.GetClusterUuid.output.Uuid}}\"}],\"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateInventory","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateInventory.output.HttpStatusCode 200}}","Message":"Export policy removed successfully","ObjectType":"workflow.Outcome"},{"Condition":"{{ne .global.UpdateInventory.output.HttpStatusCode 200}}","Message":"{{.global.UpdateInventory.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","TargetType":"Local","Url":"/v1/task/NetAppScopedInventories"}],"CancelAction":[],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints","TargetDataType":{"ObjectType":"storage.NetAppCluster"}},"Description":"Remove NetApp export policy.","ErrorResponseHandler":{"ObjectType":"workflow.ErrorResponseHandler","Selector":"Name eq \"NetAppApiErrorResponseHandler\""},"Name":"RemoveNetAppExportPolicy","ObjectType":"workflow.BatchApiExecutor","Output":{"ExportPolicyName":"{{.global.GetNetAppExportPolicy.output.ExportPolicyName}}"},"RetryFromFailedApi":true,"SharedScope":"shared","SkipOnCondition":"{{if ne .global.task.input.StorageDevice.ObjectType \"storage.NetAppCluster\"}} true {{end}}","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"RemoveNetAppExportPolicy\" and Version eq 2"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetClusterUuid","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.GetClusterUuid.output.HttpStatusCode 200}}","Message":"Get Cluster UUID successful.","ObjectType":"workflow.Outcome"},{"Condition":"{{ne .global.GetClusterUuid.output.HttpStatusCode 200}}","Message":"Get Cluster UUID failed.","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"Uuid","ObjectType":"content.Parameter","Path":"$.Uuid","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Local","Url":"/v1/storage/NetAppClusters/{{.global.task.input.StorageDevice.Moid}}?$select=Uuid"},{"Body":"{\"name\": \"{{.global.task.input.ExportPolicyName}}\", \"rules\": [{\"clients\": [ {{range $index, $client:=.global.task.input.ClientMatchList}} {{if $index}},{{end}} {\"match\": \"{{$client}}\"} {{end}} ], \"superuser\": [{{range $index, $securityType:= .global.task.input.SuperuserSecurityType}} {{if $index}},{{end}}\"{{$securityType}}\" {{end}}], \"protocols\": [{{range $index, $protocols:= .global.task.input.ExportPolicyProtocols}} {{if $index}},{{end}}\"{{$protocols}}\" {{end}}],\"ro_rule\": [{{range $index, $ro_rule:= .global.task.input.ReadOnlyPolicyRules}} {{if $index}},{{end}}\"{{$ro_rule}}\" {{end}}], \"rw_rule\": [{{range $index, $rw_rule:= .global.task.input.ReadWritePolicyRules}} {{if $index}},{{end}}\"{{$rw_rule}}\" {{end}}]}], \"svm\": {\"name\": \"{{.global.task.input.StorageVirtualMachineName}}\"}}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"NewNetAppExportPolicy","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.NewNetAppExportPolicy.output.HttpStatusCode 400) (le .global.NewNetAppExportPolicy.output.HttpStatusCode 499)}}","Message":"{{if .global.NewNetAppExportPolicy.output.Errors}}{{$err := (index .global.NewNetAppExportPolicy.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.NewNetAppExportPolicy.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.NewNetAppExportPolicy.output.HttpStatusCode 500)}}","Message":"{{if .global.NewNetAppExportPolicy.output.Errors}}{{$err := (index .global.NewNetAppExportPolicy.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.NewNetAppExportPolicy.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.NewNetAppExportPolicy.output.HttpStatusCode 501) (le .global.NewNetAppExportPolicy.output.HttpStatusCode 599)}}","Message":"{{if .global.NewNetAppExportPolicy.output.Errors}}{{$err := (index .global.NewNetAppExportPolicy.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.NewNetAppExportPolicy.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{(eq .global.NewNetAppExportPolicy.output.HttpStatusCode 201)}}","Message":"Export policy created successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"ExportPolicyName","ObjectType":"content.Parameter","Path":"$.records[0].name","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"ExportPolicyId","ObjectType":"content.Parameter","Path":"$.records[0].id","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/protocols/nfs/export-policies?return_records=true"},{"Body":"{\"Type\":\"storage.NetAppExportPolicy\",\"Queries\": [{\"PolicyId\": \"{{Ftoi .global.NewNetAppExportPolicy.output.ExportPolicyId}}\", \"ClusterUuid\": \"{{.global.GetClusterUuid.output.Uuid}}\"}],\"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateInventory","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateInventory.output.HttpStatusCode 200}}","Message":"Export policy created successfully.","ObjectType":"workflow.Outcome","Type":"Success"},{"Condition":"{{ne .global.UpdateInventory.output.HttpStatusCode 200}}","Message":"{{.global.UpdateInventory.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","TargetType":"Local","Url":"/v1/task/NetAppScopedInventories"}],"CancelAction":[],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints","TargetDataType":{"ObjectType":"storage.NetAppCluster"}},"Description":"New NetApp export policy.","ErrorResponseHandler":{"ObjectType":"workflow.ErrorResponseHandler","Selector":"Name eq \"NetAppApiErrorResponseHandler\""},"Name":"NewNetAppExportPolicy","ObjectType":"workflow.BatchApiExecutor","Output":{"ExportPolicyName":"{{.global.NewNetAppExportPolicy.output.ExportPolicyName}}"},"RetryFromFailedApi":true,"SharedScope":"shared","SkipOnCondition":"{{if ne .global.task.input.StorageDevice.ObjectType \"storage.NetAppCluster\"}} true {{end}}","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"NewNetAppExportPolicy\" and Version eq 2"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetClusterUuid","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.GetClusterUuid.output.HttpStatusCode 200}}","Message":"Get Cluster UUID successful.","ObjectType":"workflow.Outcome","Type":"Success"},{"Condition":"{{ne .global.GetClusterUuid.output.HttpStatusCode 200}}","Message":"Get Cluster UUID failed.","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"Uuid","ObjectType":"content.Parameter","Path":"$.Uuid","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Local","Url":"/v1/storage/NetAppClusters/{{.global.task.input.StorageDevice.Moid}}?$select=Uuid"},{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetNetAppExportPolicy","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.GetNetAppExportPolicy.output.HttpStatusCode 400)  (le .global.GetNetAppExportPolicy.output.HttpStatusCode 499)}}","Message":"{{if .global.GetNetAppExportPolicy.output.Errors}}{{$err := (index .global.GetNetAppExportPolicy.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppExportPolicy.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.GetNetAppExportPolicy.output.HttpStatusCode 500)}}","Message":"{{if .global.GetNetAppExportPolicy.output.Errors}}{{$err := (index .global.GetNetAppExportPolicy.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppExportPolicy.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.GetNetAppExportPolicy.output.HttpStatusCode 501)  (le .global.GetNetAppExportPolicy.output.HttpStatusCode 599)}}","Message":"{{if .global.GetNetAppExportPolicy.output.Errors}}{{$err := (index .global.GetNetAppExportPolicy.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppExportPolicy.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{ and (eq .global.GetNetAppExportPolicy.output.HttpStatusCode 200) (not .global.GetNetAppExportPolicy.output.ExportPolicyName) }}","Message":"The export policy named '{{.global.task.input.ExportPolicyName}}' is not present on the storage virtual machine named '{{.global.task.input.StorageVirtualMachineName}}' and cannot be applied to its volumes.","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.GetNetAppExportPolicy.output.HttpStatusCode 200)}}","Message":"Export policy retrieved successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"ExportPolicyName","ObjectType":"content.Parameter","Path":"$.records[0].name","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"ExportPolicyId","ObjectType":"content.Parameter","Path":"$.records[0].id","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"NumberOfRecord","ObjectType":"content.Parameter","Path":"$.num_records","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/protocols/nfs/export-policies?name={{.global.task.input.ExportPolicyName}}&svm.name={{.global.task.input.StorageVirtualMachineName}}"},{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetNetAppVolumeDetails","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.GetNetAppVolumeDetails.output.HttpStatusCode 400) (le .global.GetNetAppVolumeDetails.output.HttpStatusCode 499)}}","Message":"{{if .global.GetNetAppVolumeDetails.output.Errors}}{{$err := (index .global.GetNetAppVolumeDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppVolumeDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.GetNetAppVolumeDetails.output.HttpStatusCode 500)}}","Message":"{{if .global.GetNetAppVolumeDetails.output.Errors}}{{$err := (index .global.GetNetAppVolumeDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppVolumeDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.GetNetAppVolumeDetails.output.HttpStatusCode 501) (le .global.GetNetAppVolumeDetails.output.HttpStatusCode 599)}}","Message":"{{if .global.GetNetAppVolumeDetails.output.Errors}}{{$err := (index .global.GetNetAppVolumeDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppVolumeDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{ and (eq .global.GetNetAppVolumeDetails.output.HttpStatusCode 200) (not .global.GetNetAppVolumeDetails.output.VolumeUuid) }}","Message":"The volume named '{{.global.task.input.VolumeName}}' is not present on the storage virtual machine named '{{.global.task.input.StorageVirtualMachineName}}'.","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ (eq .global.GetNetAppVolumeDetails.output.HttpStatusCode 200) }}","Message":"Volume retrieved successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"VolumeUuid","ObjectType":"content.Parameter","Path":"$.records[0].uuid","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"PreviousExportPolicyName","ObjectType":"content.Parameter","Path":"$.records[0].nas.export_policy.name","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"NumberOfRecord","ObjectType":"content.Parameter","Path":"$.num_records","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/storage/volumes?name={{.global.task.input.VolumeName}}&svm.name={{.global.task.input.StorageVirtualMachineName}}&fields=nas"},{"Body":"{\"nas\": {\"export_policy\": {\"name\": \"{{.global.GetNetAppExportPolicy.output.ExportPolicyName}}\"}}}","ContentType":"json","EndpointRequestType":"Internal","Method":"PATCH","Name":"AddExportPolicyVolume","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.AddExportPolicyVolume.output.HttpStatusCode 400) (le .global.AddExportPolicyVolume.output.HttpStatusCode 499)}}","Message":"{{if .global.AddExportPolicyVolume.output.Errors}}{{$err := (index .global.AddExportPolicyVolume.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.AddExportPolicyVolume.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.AddExportPolicyVolume.output.HttpStatusCode 500)}}","Message":"{{if .global.AddExportPolicyVolume.output.Errors}}{{$err := (index .global.AddExportPolicyVolume.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.AddExportPolicyVolume.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.AddExportPolicyVolume.output.HttpStatusCode 501) (le .global.AddExportPolicyVolume.output.HttpStatusCode 599)}}","Message":"{{if .global.AddExportPolicyVolume.output.Errors}}{{$err := (index .global.AddExportPolicyVolume.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.AddExportPolicyVolume.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{(eq .global.AddExportPolicyVolume.output.HttpStatusCode 200)}}","Message":"Export policy successfully added to the volume.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/storage/volumes?name={{.global.task.input.VolumeName}}&svm.name={{.global.task.input.StorageVirtualMachineName}}"},{"Body":"{\"Type\":\"storage.NetAppVolume\",\"Queries\": [{\"Uuid\": \"{{.global.GetNetAppVolumeDetails.output.VolumeUuid}}\", \"ClusterUuid\": \"{{.global.GetClusterUuid.output.Uuid}}\"}], \"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateInventory","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateInventory.output.HttpStatusCode 200}}","Message":"Export policy successfully added to the volume.","ObjectType":"workflow.Outcome","Type":"Success"},{"Condition":"{{ne .global.UpdateInventory.output.HttpStatusCode 200}}","Message":"{{.global.UpdateInventory.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","TargetType":"Local","Url":"/v1/task/NetAppScopedInventories"}],"CancelAction":[],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints","TargetDataType":{"ObjectType":"storage.NetAppCluster"}},"Description":"Add an export policy to a volume.","ErrorResponseHandler":{"ObjectType":"workflow.ErrorResponseHandler","Selector":"Name eq \"NetAppApiErrorResponseHandler\""},"Name":"AddExportPolicyToNetAppVolume","ObjectType":"workflow.BatchApiExecutor","Output":{"ExportPolicyName":"{{.global.task.input.ExportPolicyName}}","PreviousExportPolicyName":"{{.global.GetNetAppVolumeDetails.output.PreviousExportPolicyName}}","VolumeName":"{{.global.task.input.VolumeName}}"},"RetryFromFailedApi":true,"SharedScope":"shared","SkipOnCondition":"{{if ne .global.task.input.StorageDevice.ObjectType \"storage.NetAppCluster\"}} true {{end}}","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"AddExportPolicyToNetAppVolume\" and Version eq 1"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"}]