[{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"Type definition for a Datacenter","Label":"Datacenter","Name":"HypervisorDatacenterType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Datacenter","Name":"Datacenter","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","InventoryPath"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/search/SearchItems?$filter=(IndexMotypes eq virtualization.BaseDatacenter)&$orderby=Name","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"InventoryPath"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"Type definition for a Cluster.","Label":"Cluster","Name":"HypervisorClusterType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Cluster","Name":"Cluster","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","InventoryPath"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/search/SearchItems?$filter=(IndexMotypes eq virtualization.BaseCluster)&$orderby=Name","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"InventoryPath"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"Type definition for a Datastore.","Label":"Datastore","Name":"HypervisorDatastoreType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Datastore","Name":"Datastore","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","InventoryPath"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/search/SearchItems?$filter=(IndexMotypes eq virtualization.BaseDatastore)&$orderby=Name","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"InventoryPath"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"NetApp storage target device.","Label":"NetApp Storage Target Datatype","Name":"NetAppStorageTargetDataType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"CustomDataTypeProperties":{"ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage target device.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[{"ConnectorAttribute":"RegisteredDevice.Moid","ConstraintAttributes":["ObjectType"],"DisplayAttributes":["Name","ManagementAddress"],"ObjectType":"workflow.TargetProperty","Selector":"/api/v1/storage/NetAppClusters?$orderby=Name","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"SupportedObjects":["storage.NetAppCluster"]}],"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"Type definition for a Hypervisor Host.","Label":"ESXi Host","Name":"HypervisorHostType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Host","Name":"Host","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":255,"Min":1,"ObjectType":"workflow.Constraints","Regex":"^(([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]).([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]).([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]).([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])|(([0-9A-Fa-f]{1,4}:([0-9A-Fa-f]{1,4}:([0-9A-Fa-f]{1,4}:([0-9A-Fa-f]{1,4}:([0-9A-Fa-f]{1,4}:[0-9A-Fa-f]{0,4}|:[0-9A-Fa-f]{1,4})?|(:[0-9A-Fa-f]{1,4}){0,2})|(:[0-9A-Fa-f]{1,4}){0,3})|(:[0-9A-Fa-f]{1,4}){0,4})|:(:[0-9A-Fa-f]{1,4}){0,5})((:[0-9A-Fa-f]{1,4}){2}|:(25[0-5]|(2[0-4]|1[0-9]|[1-9])?[0-9])(\\\\.(25[0-5]|(2[0-4]|1[0-9]|[1-9])?[0-9])){3})|(([0-9A-Fa-f]{1,4}:){1,6}|:):[0-9A-Fa-f]{0,4}|([0-9A-Fa-f]{1,4}:){7}:)|[a-zA-Z0-9]+([a-zA-Z0-9-._]*[a-zA-Z0-9]))$"},"InventorySelector":[{"DisplayAttributes":["Name"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/search/SearchItems?$filter=(IndexMotypes eq virtualization.BaseHost)&$orderby=Name","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Name"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Remove datastore from selected hypervisor. Requires datacenter, cluster (or host), datastore as inputs. On successful execution, the datastore name, NaaId of the deleted datastore, and the LUN number are generated as outputs.","Label":"Remove Hypervisor Datastore","Name":"RemoveHypervisorDatastore","ObjectType":"workflow.TaskDefinition","Properties":{"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Hypervisor Manager","Name":"Vcenter","ObjectType":"workflow.TargetDataType","Properties":[{"DisplayAttributes":["DeviceHostname","Vendor"],"ObjectType":"workflow.TargetProperty","Selector":"/api/v1/asset/DeviceRegistrations?$filter=PlatformType eq 'VmwareVcenter'","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"}}],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Datacenter associated with the datastore.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Datacenter","Name":"Datacenter","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"HypervisorDatacenterType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Cluster on which the datastore is hosted.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Cluster","Name":"Cluster","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"HypervisorClusterType","ObjectType":"workflow.CustomDataProperty"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Host on which the datastore is hosted. If cluster is specified, then host will be ignored.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Host","Name":"Host","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"HypervisorHostType","ObjectType":"workflow.CustomDataProperty"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Name of the datastore to be removed.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Datastore","Name":"Datastore","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"HypervisorDatastoreType","ObjectType":"workflow.CustomDataProperty"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Name of the datastore that was removed.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Datastore","Name":"Datastore","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"HypervisorDatastoreType","ObjectType":"workflow.CustomDataProperty"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Disk associated with the datastore that was removed.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Disk name","Name":"NAAId","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"LUN number of the datastore that was removed.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"LUN Number","Name":"LUNNumber","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}}],"RetryCount":1,"RetryDelay":10,"RetryPolicy":"Fixed","SupportStatus":"Beta","Timeout":150,"TimeoutPolicy":"Retry"},"RollbackTasks":[],"SharedScope":"shared","Tags":[{"Key":"category","Value":"Virtualization"},{"Key":"platformType.VmwareVcenter","Value":"true"}],"Version":2},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"NetApp LUN path.","Label":"NetApp LUN Path","Name":"NetAppLunPathType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"LUN Path should be between 1 and 254 characters long depending on the device target selected it may vary, for example /vol/vol1/lun1.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"LUN Path","Name":"LunPath","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":254,"Min":1,"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","Path"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/storage/NetAppLuns?$orderby=Name&$select=Name,Path","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Path"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"NetApp storage virtual machine name.","Label":"NetApp Storage Virtual Machine","Name":"NetAppStorageVirtualMachineNameType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Virtual Machine","Name":"StorageVirtualMachineName","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":47,"Min":1,"ObjectType":"workflow.Constraints","Regex":"[0-9A-z_][-A-z0-9._]*"},"InventorySelector":[{"DisplayAttributes":["Name"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/storage/NetAppStorageVms?$orderby=Name&$select=Name","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Name"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Find a LUN using its NAA ID as the input. If a LUN exists, the LUN path and storage virtual machine name are generated as outputs.","Label":"Find NetApp LUN by ID","Name":"FindNetAppLunById","ObjectType":"workflow.TaskDefinition","Properties":{"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageTargetDataType","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Network Address Authority identifier for the LUN. (e.g., 600a0980486e542d4f5a2f47694d684b)","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"NAA ID","Name":"NaaId","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":254,"Min":1,"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"LUN path (e.g., /vol/vol1/lun1).","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"LUN Path","Name":"LunPath","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppLunPathType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage virtual machine name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Virtual Machine","Name":"StorageVirtualMachineName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageVirtualMachineNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true}],"RetryCount":5,"RetryDelay":10,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":60,"TimeoutPolicy":"Retry"},"RollbackTasks":[],"SharedScope":"shared","Tags":[{"Key":"category","Value":"Storage"},{"Key":"subcategory","Value":"NetApp"},{"Key":"platformType.NetAppActiveIqUnifiedManager","Value":"true"}],"Version":2},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Remove a LUN with LUN path and a storage virtual machine name as the inputs. On successful execution, the LUN path is generated as output.","Label":"Remove NetApp Smart LUN","Name":"RemoveNetAppSmartLun","ObjectType":"workflow.TaskDefinition","Properties":{"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageTargetDataType","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage virtual machine name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Virtual Machine","Name":"StorageVirtualMachineName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageVirtualMachineNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"LUN path (e.g., /vol/vol1/lun1).","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"LUN Path","Name":"LunPath","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":254,"Min":1,"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","IsMapped","Path"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/storage/NetAppLuns?$orderby=Name&$select=Name,Path,IsMapped","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Path"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Remove the LUN even if the LUN is mapped to an initiator group.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Remove Mapped LUN","Name":"RemoveMappedLunFlag","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"boolean"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Remove the volume when the LUN being removed is the last LUN on the volume.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Remove Volume","Name":"RemoveVolumeFlag","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"boolean"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"LUN path (e.g., /vol/vol1/lun1).","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"LUN Path","Name":"LunPath","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Initiator Group Name","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Initiator Group Name","Name":"IgroupName","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}}],"RetryCount":5,"RetryDelay":10,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":60,"TimeoutPolicy":"Retry"},"RollbackTasks":[],"SharedScope":"shared","Tags":[{"Key":"category","Value":"Storage"},{"Key":"subcategory","Value":"NetApp"},{"Key":"platformType.NetAppActiveIqUnifiedManager","Value":"true"}],"Version":3},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.WorkflowDefinition","DefaultVersion":true,"Description":"Remove a VMFS datastore from all hosts in the cluster. The underlying storage volume and LUN are removed using the Remove NetApp Smart LUN task.","InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Hypervisor Manager","Name":"Vcenter","ObjectType":"workflow.TargetDataType","Properties":[{"DisplayAttributes":["DeviceHostname","Vendor"],"ObjectType":"workflow.TargetProperty","Selector":"/api/v1/asset/DeviceRegistrations?$filter=PlatformType eq 'VmwareVcenter'","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"}}],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Datacenter associated with the datastore.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Datacenter","Name":"Datacenter","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"HypervisorDatacenterType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Cluster on which the datastore is hosted.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Cluster","Name":"Cluster","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"HypervisorClusterType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Name of the datastore to be removed.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Datastore","Name":"Datastore","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"HypervisorDatastoreType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"CustomDataTypeProperties":{"CatalogMoid":"shared","CustomDataTypeName":"NetAppStorageTargetDataType","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue","Value":true},"Description":"Remove the LUN even if the LUN is mapped to an initiator group.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Remove Mapped LUN","Name":"RemoveMappedLunFlag","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"boolean"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue","Value":true},"Description":"Remove the volume when the LUN being removed is the last LUN on the volume.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Remove Volume","Name":"RemoveVolumeFlag","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"boolean"},"Required":true}],"InputParameterSet":[],"Label":"Remove VMFS Datastore Using NetApp Smart LUN","Name":"RemoveVMFSDatastoreUsingNetAppSmartLUN","ObjectType":"workflow.WorkflowDefinition","OutputDefinition":[],"Properties":{"ObjectType":"workflow.WorkflowProperties","SupportStatus":"Supported"},"SharedScope":"user","Tags":[{"Key":"category","Value":"Virtualization"}],"Tasks":[{"Name":"StartTask","NextTask":"RemoveHypervisorDatastore","ObjectType":"workflow.StartTask"},{"Name":"SuccessEndTask","ObjectType":"workflow.SuccessEndTask"},{"Name":"FailureEndTask","ObjectType":"workflow.FailureEndTask"},{"CatalogMoid":"shared","Description":"Remove datastore from selected hypervisor. Requires datacenter, cluster (or host), datastore as inputs. On successful execution, the datastore name, NaaId of the deleted datastore, and the LUN number are generated as outputs.","InputParameters":{"Cluster":"${workflow.input.Cluster}","Datacenter":"${workflow.input.Datacenter}","Datastore":"${workflow.input.Datastore}","Vcenter":"${workflow.input.Vcenter}"},"Label":"Remove Hypervisor Datastore","Name":"RemoveHypervisorDatastore","ObjectType":"workflow.WorkerTask","OnSuccess":"FindNetAppLunById","TaskDefinitionName":"RemoveHypervisorDatastore","Version":2},{"CatalogMoid":"shared","Description":"Find a LUN using its NAA ID as the input. If a LUN exists, the LUN path and storage virtual machine name are generated as outputs.","InputParameters":{"NaaId":"${RemoveHypervisorDatastore.output.NAAId}","StorageDevice":"${workflow.input.StorageDevice}"},"Label":"Find NetApp LUN by ID","Name":"FindNetAppLunById","ObjectType":"workflow.WorkerTask","OnSuccess":"RemoveNetAppSmartLun","TaskDefinitionName":"FindNetAppLunById","Version":2},{"CatalogMoid":"shared","Description":"Remove a LUN with LUN path and a storage virtual machine name as the inputs. On successful execution, the LUN path is generated as output.","InputParameters":{"LunPath":"${FindNetAppLunById.output.LunPath}","RemoveMappedLunFlag":"${workflow.input.RemoveMappedLunFlag}","RemoveVolumeFlag":"${workflow.input.RemoveVolumeFlag}","StorageDevice":"${workflow.input.StorageDevice}","StorageVirtualMachineName":"${FindNetAppLunById.output.StorageVirtualMachineName}"},"Label":"Remove NetApp Smart LUN","Name":"RemoveNetAppSmartLun","ObjectType":"workflow.WorkerTask","OnSuccess":"SuccessEndTask","TaskDefinitionName":"RemoveNetAppSmartLun","Version":3}],"UiInputFilters":[{"Filters":["RegisteredDevice.Moid eq '${Vcenter.Moid}'"],"Name":"Datacenter","ObjectType":"workflow.UiInputFilter"},{"Filters":["RegisteredDevice.Moid eq '${Vcenter.Moid}'"],"Name":"Cluster","ObjectType":"workflow.UiInputFilter"},{"Filters":["RegisteredDevice.Moid eq '${Vcenter.Moid}'"],"Name":"Datastore","ObjectType":"workflow.UiInputFilter"}],"UiRenderingData":{"PDModesMeta":{"Cluster":"advanced","Datacenter":"advanced","Datastore":"advanced","Host":"advanced"},"Positions":[{"Name":"StartTask","X":263.5,"Y":75.5},{"Name":"SuccessEndTask","X":263.5,"Y":444},{"Name":"FailureEndTask","X":406.5,"Y":444},{"Name":"RemoveHypervisorDatastore","X":178.3760986328125,"Y":147.50885009765625},{"Name":"FindNetAppLunById","X":178.23309326171875,"Y":245.8665771484375},{"Name":"RemoveNetAppSmartLun","X":178.5,"Y":345}]},"VariableDefinition":[],"Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/WorkflowDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.ErrorResponseHandler","Name":"NetAppApiErrorResponseHandler","ObjectType":"workflow.ErrorResponseHandler","Parameters":[{"AcceptSingleValue":true,"ComplexType":"Error","ItemType":"complex","Name":"Errors","ObjectType":"content.Parameter","Path":"$","Type":"collection"}],"PlatformType":"NetAppActiveIqUnifiedManager","SharedScope":"shared","Types":[{"Name":"Error","ObjectType":"content.ComplexType","Parameters":[{"ItemType":"simple","Name":"Msg","ObjectType":"content.Parameter","Path":"$.error.message","Type":"simple"},{"ItemType":"simple","Name":"ErrorCode","ObjectType":"content.Parameter","Path":"$.error.code","Type":"simple"}]}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/ErrorResponseHandlers","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Remove a VMFS datastore from Vmware hypervisor.","InterfaceTask":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"RemoveHypervisorDatastore\" and Version eq 2"},"Label":"Remove Hypervisor Datastore","Name":"RemoveHypervisorDatastoreImpl","ObjectType":"workflow.TaskDefinition","Properties":{"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Hypervisor Manager","Name":"Vcenter","ObjectType":"workflow.TargetDataType","Properties":[{"DisplayAttributes":["DeviceHostname","Vendor"],"ObjectType":"workflow.TargetProperty","Selector":"/api/v1/asset/DeviceRegistrations?$filter=PlatformType eq 'VmwareVcenter'","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"}}],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Datacenter associated with the datastore.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Datacenter","Name":"Datacenter","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"HypervisorDatacenterType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Cluster on which the datastore is hosted.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Cluster","Name":"Cluster","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"HypervisorClusterType","ObjectType":"workflow.CustomDataProperty"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Host on which the datastore is hosted. If cluster is specified, then host will be ignored.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Host","Name":"Host","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"HypervisorHostType","ObjectType":"workflow.CustomDataProperty"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Name of the datastore to be removed.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Datastore","Name":"Datastore","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"HypervisorDatastoreType","ObjectType":"workflow.CustomDataProperty"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Name of the datastore that was removed.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Datastore","Name":"Datastore","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"HypervisorDatastoreType","ObjectType":"workflow.CustomDataProperty"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Disk associated with the datastore that was removed.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Disk name","Name":"NAAId","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"LUN number of the datastore that was removed.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"LUN Number","Name":"LUNNumber","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}}],"RetryCount":1,"RetryDelay":10,"RetryPolicy":"Fixed","SupportStatus":"Beta","Timeout":150,"TimeoutPolicy":"Retry"},"RollbackTasks":[],"SharedScope":"shared","Tags":[{"Key":"platformType.VmwareVcenter","Value":"true"}],"Version":2},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"Batch":[{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetClusterUuid","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.GetClusterUuid.output.HttpStatusCode 200}}","Message":"Get Cluster UUID successful.","ObjectType":"workflow.Outcome","Type":"Success"},{"Condition":"{{ne .global.GetClusterUuid.output.HttpStatusCode 200}}","Message":"Get Cluster UUID failed.","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"Uuid","ObjectType":"content.Parameter","Path":"$.Uuid","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Local","Url":"/v1/storage/NetAppClusters/{{.global.task.input.StorageDevice.Moid}}?$select=Uuid"},{"Body":"{}","ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"FindLUNByNaaId","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.FindLUNByNaaId.output.HttpStatusCode 400) (le .global.FindLUNByNaaId.output.HttpStatusCode 499)}}","Message":"{{if .global.FindLUNByNaaId.output.Errors}}{{$err := (index .global.FindLUNByNaaId.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.FindLUNByNaaId.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.FindLUNByNaaId.output.HttpStatusCode 500)}}","Message":"{{if .global.FindLUNByNaaId.output.Errors}}{{$err := (index .global.FindLUNByNaaId.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.FindLUNByNaaId.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.FindLUNByNaaId.output.HttpStatusCode 501) (le .global.FindLUNByNaaId.output.HttpStatusCode 599)}}","Message":"{{if .global.FindLUNByNaaId.output.Errors}}{{$err := (index .global.FindLUNByNaaId.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.FindLUNByNaaId.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{(ge (.global.FindLUNByNaaId.output.NumberLunMapped | Atoi) 1)}}","Message":"LUN retrieved.","ObjectType":"workflow.Outcome","Type":"Success"},{"Condition":"{{(eq (.global.FindLUNByNaaId.output.NumberLunMapped | Atoi) 0)}}","Message":"No LUN exists.","ObjectType":"workflow.Outcome","Type":"TerminalError"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"NumberLunMapped","ObjectType":"content.Parameter","Path":"$.num_records","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"LUNUuid","ObjectType":"content.Parameter","Path":"$.records[0].uuid","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/storage/luns?serial_number={{UrlQueryEscape (HexToAscii (slice (.global.task.input.NaaId | TrimSpace) 8))}}"},{"Body":"{}","ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetNetAppLUNDetails","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.GetNetAppLUNDetails.output.HttpStatusCode 400) (le .global.GetNetAppLUNDetails.output.HttpStatusCode 499)}}","Message":"{{if .global.GetNetAppLUNDetails.output.Errors}}{{$err := (index .global.GetNetAppLUNDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppLUNDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.GetNetAppLUNDetails.output.HttpStatusCode 500)}}","Message":"{{if .global.GetNetAppLUNDetails.output.Errors}}{{$err := (index .global.GetNetAppLUNDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppLUNDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.GetNetAppLUNDetails.output.HttpStatusCode 501) (le .global.GetNetAppLUNDetails.output.HttpStatusCode 599)}}","Message":"{{if .global.GetNetAppLUNDetails.output.Errors}}{{$err := (index .global.GetNetAppLUNDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppLUNDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{(eq .global.GetNetAppLUNDetails.output.HttpStatusCode 200)}}","Message":"LUN retrieved successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"SVMName","ObjectType":"content.Parameter","Path":"$.svm.name","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"LUNPath","ObjectType":"content.Parameter","Path":"$.name","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/storage/luns/{{.global.FindLUNByNaaId.output.LUNUuid}}"}],"CancelAction":[],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints","TargetDataType":{"ObjectType":"storage.NetAppCluster"}},"Description":"Find NetApp LUN by ID.","ErrorResponseHandler":{"ObjectType":"workflow.ErrorResponseHandler","Selector":"Name eq \"NetAppApiErrorResponseHandler\""},"Name":"FindNetAppLunById","ObjectType":"workflow.BatchApiExecutor","Output":{"LunPath":"{{.global.GetNetAppLUNDetails.output.LUNPath}}","StorageVirtualMachineName":"{{.global.GetNetAppLUNDetails.output.SVMName}}"},"RetryFromFailedApi":true,"SharedScope":"shared","SkipOnCondition":"{{if ne .global.task.input.StorageDevice.ObjectType \"storage.NetAppCluster\"}} true {{end}}","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"FindNetAppLunById\" and Version eq 2"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetClusterUuid","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.GetClusterUuid.output.HttpStatusCode 200}}","Message":"Get Cluster UUID successful.","ObjectType":"workflow.Outcome"},{"Condition":"{{ne .global.GetClusterUuid.output.HttpStatusCode 200}}","Message":"Get Cluster UUID failed.","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"Uuid","ObjectType":"content.Parameter","Path":"$.Uuid","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Local","Url":"/v1/storage/NetAppClusters/{{.global.task.input.StorageDevice.Moid}}?$select=Uuid"},{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetNetAppLunDetails","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.GetNetAppLunDetails.output.HttpStatusCode 400) (le .global.GetNetAppLunDetails.output.HttpStatusCode 499)}}","Message":"{{if .global.GetNetAppLunDetails.output.Errors}}{{$err := (index .global.GetNetAppLunDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppLunDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.GetNetAppLunDetails.output.HttpStatusCode 500)}}","Message":"{{if .global.GetNetAppLunDetails.output.Errors}}{{$err := (index .global.GetNetAppLunDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppLunDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.GetNetAppLunDetails.output.HttpStatusCode 501) (le .global.GetNetAppLunDetails.output.HttpStatusCode 599)}}","Message":"{{if .global.GetNetAppLunDetails.output.Errors}}{{$err := (index .global.GetNetAppLunDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppLunDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{ and (eq .global.GetNetAppLunDetails.output.HttpStatusCode 200) (not .global.GetNetAppLunDetails.output.LunUuid) }}","Message":"No LUN named '{{.global.task.input.LunPath}}' found on storage virtual machine named '{{.global.task.input.StorageVirtualMachineName}}'.","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.GetNetAppLunDetails.output.HttpStatusCode 200)}}","Message":"LUN details retrieved successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"LunUuid","ObjectType":"content.Parameter","Path":"$.records[0].uuid","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"VolumeUuid","ObjectType":"content.Parameter","Path":"$.records[0].location.volume.uuid","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"iGroupUuid","ObjectType":"content.Parameter","Path":"$.records[0].lun_maps[0].igroup.uuid","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"iGroupName","ObjectType":"content.Parameter","Path":"$.records[0].lun_maps[0].igroup.name","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/storage/luns?name={{.global.task.input.LunPath}}&svm.name={{.global.task.input.StorageVirtualMachineName}}&fields=location,lun_maps&return_timeout=59"},{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetNetAppLunCountByVolume","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.GetNetAppLunCountByVolume.output.HttpStatusCode 400) (le .global.GetNetAppLunCountByVolume.output.HttpStatusCode 499)}}","Message":"{{if .global.GetNetAppLunCountByVolume.output.Errors}}{{$err := (index .global.GetNetAppLunCountByVolume.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppLunCountByVolume.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.GetNetAppLunCountByVolume.output.HttpStatusCode 500)}}","Message":"{{if .global.GetNetAppLunCountByVolume.output.Errors}}{{$err := (index .global.GetNetAppLunCountByVolume.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppLunCountByVolume.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.GetNetAppLunCountByVolume.output.HttpStatusCode 501) (le .global.GetNetAppLunCountByVolume.output.HttpStatusCode 599)}}","Message":"{{if .global.GetNetAppLunCountByVolume.output.Errors}}{{$err := (index .global.GetNetAppLunCountByVolume.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppLunCountByVolume.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{(eq .global.GetNetAppLunCountByVolume.output.HttpStatusCode 200)}}","Message":"LUN count retrieved successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"LunCount","ObjectType":"content.Parameter","Path":"$.num_records","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/storage/luns?location.volume.uuid={{.global.GetNetAppLunDetails.output.VolumeUuid}}&return_records=false&return_timeout=59"},{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetNetAppVolumeDetails","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.GetNetAppVolumeDetails.output.HttpStatusCode 400) (le .global.GetNetAppVolumeDetails.output.HttpStatusCode 499)}}","Message":"{{if .global.GetNetAppVolumeDetails.output.Errors}}{{$err := (index .global.GetNetAppVolumeDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppVolumeDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.GetNetAppVolumeDetails.output.HttpStatusCode 500)}}","Message":"{{if .global.GetNetAppVolumeDetails.output.Errors}}{{$err := (index .global.GetNetAppVolumeDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppVolumeDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.GetNetAppVolumeDetails.output.HttpStatusCode 501) (le .global.GetNetAppVolumeDetails.output.HttpStatusCode 599)}}","Message":"{{if .global.GetNetAppVolumeDetails.output.Errors}}{{$err := (index .global.GetNetAppVolumeDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppVolumeDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{ and (eq .global.GetNetAppVolumeDetails.output.HttpStatusCode 200) (not .global.GetNetAppVolumeDetails.output.VolumeUuid) }}","Message":"No volume for '{{.global.task.input.LunPath}}' found.","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ (eq .global.GetNetAppVolumeDetails.output.HttpStatusCode 200) }}","Message":"Volume details retrieved successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"VolumeUuid","ObjectType":"content.Parameter","Path":"$.uuid","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"AggregateUuid","ObjectType":"content.Parameter","Path":"$.aggregates[0].uuid","Secure":false,"Type":"simple"}],"Types":[]},"SkipOnCondition":"{{if or (ne .global.GetNetAppLunCountByVolume.output.LunCount \"1\") (not (.global.task.input.RemoveVolumeFlag))}} true {{end}}","TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/storage/volumes/{{.global.GetNetAppLunDetails.output.VolumeUuid}}?fields=aggregates&return_timeout=59"},{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetNetAppiGroupDetails","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.GetNetAppiGroupDetails.output.HttpStatusCode 400) (le .global.GetNetAppiGroupDetails.output.HttpStatusCode 499)}}","Message":"{{if .global.GetNetAppiGroupDetails.output.Errors}}{{$err := (index .global.GetNetAppiGroupDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppiGroupDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.GetNetAppiGroupDetails.output.HttpStatusCode 500)}}","Message":"{{if .global.GetNetAppiGroupDetails.output.Errors}}{{$err := (index .global.GetNetAppiGroupDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppiGroupDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.GetNetAppiGroupDetails.output.HttpStatusCode 501) (le .global.GetNetAppiGroupDetails.output.HttpStatusCode 599)}}","Message":"{{if .global.GetNetAppiGroupDetails.output.Errors}}{{$err := (index .global.GetNetAppiGroupDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppiGroupDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{(eq .global.GetNetAppiGroupDetails.output.HttpStatusCode 200)}}","Message":"Initiator group details retrieved successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"iGroupUuid","ObjectType":"content.Parameter","Path":"$.records[0].uuid","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"iGroupName","ObjectType":"content.Parameter","Path":"$.records[0].name","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"DeleteOnUnmap","ObjectType":"content.Parameter","Path":"$.records[0].delete_on_unmap","Secure":false,"Type":"simple"}],"Types":[]},"SkipOnCondition":"{{if eq .global.GetNetAppLunDetails.output.iGroupName \"\"}} true {{end}}","TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/protocols/san/igroups?name={{.global.GetNetAppLunDetails.output.iGroupName}}&fields=uuid,name,delete_on_unmap&return_timeout=59"},{"Body":"{}","ContentType":"json","EndpointRequestType":"Internal","Method":"DELETE","Name":"RemoveLun","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.RemoveLun.output.HttpStatusCode 400) (le .global.RemoveLun.output.HttpStatusCode 499)}}","Message":"{{if .global.RemoveLun.output.Errors}}{{$err := (index .global.RemoveLun.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.RemoveLun.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.RemoveLun.output.HttpStatusCode 500)}}","Message":"{{if .global.RemoveLun.output.Errors}}{{$err := (index .global.RemoveLun.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.RemoveLun.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.RemoveLun.output.HttpStatusCode 501) (le .global.RemoveLun.output.HttpStatusCode 599)}}","Message":"{{if .global.RemoveLun.output.Errors}}{{$err := (index .global.RemoveLun.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.RemoveLun.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{(eq .global.RemoveLun.output.HttpStatusCode 200)}}","Message":"LUN removed successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/storage/luns/{{.global.GetNetAppLunDetails.output.LunUuid}}?allow_delete_while_mapped={{.global.task.input.RemoveMappedLunFlag}}"},{"Body":"{}","ContentType":"json","EndpointRequestType":"Internal","Method":"DELETE","Name":"RemoveVolume","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.RemoveVolume.output.HttpStatusCode 400) (le .global.RemoveVolume.output.HttpStatusCode 499)}}","Message":"{{if .global.RemoveVolume.output.Errors}}{{$err := (index .global.RemoveVolume.output.Errors 0)}}{{if (index $err \"\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.RemoveVolume.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.RemoveVolume.output.HttpStatusCode 500)}}","Message":"{{if .global.RemoveVolume.output.Errors}}{{$err := (index .global.RemoveVolume.output.Errors 0)}}{{if (index $err \"\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.RemoveVolume.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.RemoveVolume.output.HttpStatusCode 501) (le .global.RemoveVolume.output.HttpStatusCode 599)}}","Message":"{{if .global.RemoveVolume.output.Errors}}{{$err := (index .global.RemoveVolume.output.Errors 0)}}{{if (index $err \"\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.RemoveVolume.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{ (eq .global.RemoveVolume.output.HttpStatusCode 202) }}","Message":"Job ID created successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"JobUuid","ObjectType":"content.Parameter","Path":"$.job.uuid","Secure":false,"Type":"simple"}],"Types":[]},"SkipOnCondition":"{{if or (ne .global.GetNetAppLunCountByVolume.output.LunCount \"1\") (not (.global.task.input.RemoveVolumeFlag))}} true {{end}}","TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/storage/volumes/{{.global.GetNetAppVolumeDetails.output.VolumeUuid}}?return_timeout=59"},{"Body":"{}","ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetJobDetail","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.GetJobDetail.output.HttpStatusCode 400) (le .global.GetJobDetail.output.HttpStatusCode 499)}}","Message":"{{if .global.GetJobDetail.output.Errors}}{{$err := (index .global.GetJobDetail.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetJobDetail.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.GetJobDetail.output.HttpStatusCode 500)}}","Message":"{{if .global.GetJobDetail.output.Errors}}{{$err := (index .global.GetJobDetail.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetJobDetail.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.GetJobDetail.output.HttpStatusCode 501) (le .global.GetJobDetail.output.HttpStatusCode 599)}}","Message":"{{if .global.GetJobDetail.output.Errors}}{{$err := (index .global.GetJobDetail.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetJobDetail.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{ ContainsString .global.GetJobDetail.output.JobState \"failure\" }}","Message":"HTTP Status code: {{.global.GetJobDetail.output.HttpStatusCode}}: {{if .global.GetJobDetail.output.JobMessage}} Job state: {{.global.GetJobDetail.output.JobState}} Message: {{.global.GetJobDetail.output.JobMessage}} CompletedTime: {{.global.GetJobDetail.output.CompletedTime}} {{ else }} Job status is \"Failed\"{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ ContainsString .global.GetJobDetail.output.JobState \"paused\" }}","Message":"HTTP Status code: {{.global.GetJobDetail.output.HttpStatusCode}}: {{if .global.GetJobDetail.output.JobMessage}} Job state: {{.global.GetJobDetail.output.JobState}} Message: {{.global.GetJobDetail.output.JobMessage}} CompletedTime: {{.global.GetJobDetail.output.CompletedTime}} {{ else }} Job status is \"Paused\"{{end}}","ObjectType":"workflow.Outcome","Type":"Status"},{"Condition":"{{ ContainsString .global.GetJobDetail.output.JobState \"queued\" }}","Message":"HTTP Status code: {{.global.GetJobDetail.output.HttpStatusCode}}: {{if .global.GetJobDetail.output.JobMessage}} Job state: {{.global.GetJobDetail.output.JobState}} Message: {{.global.GetJobDetail.output.JobMessage}} CompletedTime: {{.global.GetJobDetail.output.CompletedTime}} {{ else }} Job status is \"Queued\"{{end}}","ObjectType":"workflow.Outcome","Type":"Status"},{"Condition":"{{ ContainsString .global.GetJobDetail.output.JobState \"running\" }}","Message":"HTTP Status code: {{.global.GetJobDetail.output.HttpStatusCode}}: {{if .global.GetJobDetail.output.JobMessage}} Job state: {{.global.GetJobDetail.output.JobState}} Message: {{.global.GetJobDetail.output.JobMessage}} CompletedTime: {{.global.GetJobDetail.output.CompletedTime}} {{ else }} Job status is \"Running\"{{end}}","ObjectType":"workflow.Outcome","Type":"Status"},{"Condition":"{{ ContainsString .global.GetJobDetail.output.JobState \"success\" }}","Message":"Volume removed successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"JobState","ObjectType":"content.Parameter","Path":"$.state","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"CompletedTime","ObjectType":"content.Parameter","Path":"$.end_time","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"JobMessage","ObjectType":"content.Parameter","Path":"$.message","Secure":false,"Type":"simple"}],"Types":[]},"SkipOnCondition":"{{if or (ne .global.GetNetAppLunCountByVolume.output.LunCount \"1\") (not (.global.task.input.RemoveVolumeFlag))}} true {{end}}","TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/cluster/jobs/{{.global.RemoveVolume.output.JobUuid}}"},{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetNetAppLunCountByIgroup","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.GetNetAppLunCountByIgroup.output.HttpStatusCode 400) (le .global.GetNetAppLunCountByIgroup.output.HttpStatusCode 499)}}","Message":"{{if .global.GetNetAppLunCountByIgroup.output.Errors}}{{$err := (index .global.GetNetAppLunCountByIgroup.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppLunCountByIgroup.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.GetNetAppLunCountByIgroup.output.HttpStatusCode 500)}}","Message":"{{if .global.GetNetAppLunCountByIgroup.output.Errors}}{{$err := (index .global.GetNetAppLunCountByIgroup.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppLunCountByIgroup.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.GetNetAppLunCountByIgroup.output.HttpStatusCode 501) (le .global.GetNetAppLunCountByIgroup.output.HttpStatusCode 599)}}","Message":"{{if .global.GetNetAppLunCountByIgroup.output.Errors}}{{$err := (index .global.GetNetAppLunCountByIgroup.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppLunCountByIgroup.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{(eq .global.GetNetAppLunCountByIgroup.output.HttpStatusCode 200)}}","Message":"LUN count retrieved successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"LunCount","ObjectType":"content.Parameter","Path":"$.num_records","Secure":false,"Type":"simple"}],"Types":[]},"SkipOnCondition":"{{if eq .global.GetNetAppLunDetails.output.iGroupName \"\"}} true {{end}}","TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/storage/luns?lun_maps.igroup.name={{.global.GetNetAppLunDetails.output.iGroupName}}&return_records=false&return_timeout=59"},{"Body":"{\"Type\":\"storage.NetAppCluster\",\"Queries\": [{\"Uuid\": \"{{.global.GetClusterUuid.output.Uuid}}\", \"ClusterUuid\": \"{{.global.GetClusterUuid.output.Uuid}}\"}], \"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateClusterInventory","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateClusterInventory.output.HttpStatusCode 200}}","Message":"Updated cluster after volume removal.","ObjectType":"workflow.Outcome"},{"Condition":"{{ne .global.UpdateClusterInventory.output.HttpStatusCode 200}}","Message":"{{.global.UpdateClusterInventory.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","SkipOnCondition":"{{if or (ne .global.GetNetAppLunCountByVolume.output.LunCount \"1\") (not (.global.task.input.RemoveVolumeFlag))}} true {{end}}","TargetType":"Local","Url":"/v1/task/NetAppScopedInventories"},{"Body":"{\"Type\":\"storage.NetAppAggregate\",\"Queries\": [{\"Uuid\": \"{{.global.GetNetAppVolumeDetails.output.AggregateUuid}}\", \"ClusterUuid\": \"{{.global.GetClusterUuid.output.Uuid}}\"}], \"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateAggregateInventory","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateAggregateInventory.output.HttpStatusCode 200}}","Message":"Updated aggregate after volume removal.","ObjectType":"workflow.Outcome"},{"Condition":"{{ne .global.UpdateAggregateInventory.output.HttpStatusCode 200}}","Message":"{{.global.UpdateAggregateInventory.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","SkipOnCondition":"{{if or (ne .global.GetNetAppLunCountByVolume.output.LunCount \"1\") (not (.global.task.input.RemoveVolumeFlag))}} true {{end}}","TargetType":"Local","Url":"/v1/task/NetAppScopedInventories"},{"Body":"{\"Type\":\"storage.NetAppVolume\",\"Queries\": [{\"Uuid\": \"{{.global.GetNetAppVolumeDetails.output.VolumeUuid}}\", \"ClusterUuid\": \"{{.global.GetClusterUuid.output.Uuid}}\"}],\"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateVolumeInventory","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateVolumeInventory.output.HttpStatusCode 200}}","Message":"Volume removed successfully.","ObjectType":"workflow.Outcome"},{"Condition":"{{ne .global.UpdateVolumeInventory.output.HttpStatusCode 200}}","Message":"{{.global.UpdateVolumeInventory.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","SkipOnCondition":"{{if or (ne .global.GetNetAppLunCountByVolume.output.LunCount \"1\") (not (.global.task.input.RemoveVolumeFlag))}} true {{end}}","TargetType":"Local","Url":"/v1/task/NetAppScopedInventories"},{"Body":"{\"Type\":\"storage.NetAppLun\",\"Queries\": [{\"Uuid\": \"{{.global.GetNetAppLunDetails.output.LunUuid}}\", \"ClusterUuid\": \"{{.global.GetClusterUuid.output.Uuid}}\"}],\"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateInventoryLun","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateInventoryLun.output.HttpStatusCode 200}}","Message":"LUN{{if and (eq .global.GetNetAppLunCountByVolume.output.LunCount \"1\") (.global.task.input.RemoveVolumeFlag)}} and volume{{end}} removed successfully.","ObjectType":"workflow.Outcome"},{"Condition":"{{ne .global.UpdateInventoryLun.output.HttpStatusCode 200}}","Message":"{{.global.UpdateInventoryLun.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","TargetType":"Local","Url":"/v1/task/NetAppScopedInventories"},{"Body":"{\"Type\":\"storage.NetAppInitiatorGroup\",\"Queries\": [{\"Uuid\": \"{{.global.GetNetAppLunDetails.output.iGroupUuid}}\", \"ClusterUuid\": \"{{.global.GetClusterUuid.output.Uuid}}\"}],\"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateInventoryIgroup","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateInventoryIgroup.output.HttpStatusCode 200}}","Message":"{{ $igroup_deleted := (and (eq .global.GetNetAppLunCountByIgroup.output.LunCount \"0\") (.global.GetNetAppiGroupDetails.output.DeleteOnUnmap)) }}Initiator group {{if $igroup_deleted}}removed{{else}}updated{{end}} successfully.","ObjectType":"workflow.Outcome","Type":"Success"},{"Condition":"{{ne .global.UpdateInventoryIgroup.output.HttpStatusCode 200}}","Message":"{{.global.UpdateInventoryIgroup.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","SkipOnCondition":"{{if eq .global.GetNetAppLunDetails.output.iGroupUuid \"\" }} true {{end}}","TargetType":"Local","Url":"/v1/task/NetAppScopedInventories"},{"Body":"{\"Type\":\"storage.NetAppLunMap\",\"Queries\": [{\"LunUuid\":\"{{.global.GetNetAppLunDetails.output.LunUuid}}\", \"IgroupUuid\": \"{{.global.GetNetAppLunDetails.output.iGroupUuid}}\", \"ClusterUuid\": \"{{.global.GetClusterUuid.output.Uuid}}\"}],\"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateInventoryLunMap","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateInventoryLunMap.output.HttpStatusCode 200}}","Message":"{{ $vol_deleted := (and (eq .global.GetNetAppLunCountByVolume.output.LunCount \"1\") (.global.task.input.RemoveVolumeFlag)) }}{{ $igroup_deleted := (and (eq .global.GetNetAppLunCountByIgroup.output.LunCount \"0\") (.global.GetNetAppiGroupDetails.output.DeleteOnUnmap)) }}LUN{{if $vol_deleted }}{{if $igroup_deleted}}, volume,{{else}} and volume{{end}}{{end}}{{if $igroup_deleted}} and initator group{{end}} removed successfully.","ObjectType":"workflow.Outcome"},{"Condition":"{{ne .global.UpdateInventoryLunMap.output.HttpStatusCode 200}}","Message":"{{.global.UpdateInventoryLunMap.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","SkipOnCondition":"{{if eq .global.GetNetAppLunDetails.output.iGroupUuid \"\" }} true {{end}}","TargetType":"Local","Url":"/v1/task/NetAppScopedInventories"}],"CancelAction":[],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints","TargetDataType":{"ObjectType":"storage.NetAppCluster"}},"Description":"Remove a LUN.","ErrorResponseHandler":{"ObjectType":"workflow.ErrorResponseHandler","Selector":"Name eq \"NetAppApiErrorResponseHandler\""},"Name":"RemoveNetAppSmartLun","ObjectType":"workflow.BatchApiExecutor","Output":{"IgroupName":"{{.global.GetNetAppLunDetails.output.iGroupName}}","LunPath":"{{.global.task.input.LunPath}}"},"RetryFromFailedApi":true,"SharedScope":"shared","SkipOnCondition":"{{if ne .global.task.input.StorageDevice.ObjectType \"storage.NetAppCluster\"}} true {{end}}","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"RemoveNetAppSmartLun\" and Version eq 3"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"Body":"{ \"Datastore\":\"{{.global.task.input.Datastore}}\",  \"Cluster\":{{ if .global.task.input.Cluster}}\"{{.global.task.input.Cluster}}\",{{else}}\"\",{{end}}   \"Host\":{{ if .global.task.input.Host}}\"{{.global.task.input.Host}}\",{{else}}\"\",{{end}}  \"Datacenter\":\"{{.global.task.input.Datacenter}}\" }","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"RemoveHypervisorDatastoreImpl","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (eq .global.RemoveHypervisorDatastoreImpl.output.HttpStatusCode 400) ( or (ContainsString .global.RemoveHypervisorDatastoreImpl.output.HttpStatusMsg \"Datastore\") (ContainsString .global.RemoveHypervisorDatastoreImpl.output.HttpStatusMsg \"datastore\") ) (ContainsString .global.RemoveHypervisorDatastoreImpl.output.HttpStatusMsg \"not found\") }}","Message":"Datastore delete request marked successful. Message: {{.global.RemoveHypervisorDatastoreImpl.output.HttpStatusMsg}}. ","ObjectType":"workflow.Outcome"},{"Condition":"{{(ne .global.RemoveHypervisorDatastoreImpl.output.HttpStatusCode 200)}}","Error":true,"Message":"Failed to remove datastore. Message: {{.global.RemoveHypervisorDatastoreImpl.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome"},{"Condition":"true","Message":"Datastore '{{.global.RemoveHypervisorDatastoreImpl.output.DatastoreName}}' removed successfully","ObjectType":"workflow.Outcome"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"Datastore","ObjectType":"content.Parameter","Path":"$.Datastore","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"DatastoreName","ObjectType":"content.Parameter","Path":"$.DatastoreName","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"NAAId","ObjectType":"content.Parameter","Path":"$.NAAId","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"LUNNumber","ObjectType":"content.Parameter","Path":"$.LUNNumber","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Endpoint","Timeout":120,"Url":"/task/Execute/RemoveDatastore"}],"CancelAction":[],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints"},"Description":"Remove VMFS or NFS datastore from Vmware hypervisor.","Name":"RemoveHypervisorDatastoreImpl","ObjectType":"workflow.BatchApiExecutor","Output":{"Datastore":"{{.global.RemoveHypervisorDatastoreImpl.output.Datastore}}","LUNNumber":"{{.global.RemoveHypervisorDatastoreImpl.output.LUNNumber}}","NAAId":"{{.global.RemoveHypervisorDatastoreImpl.output.NAAId}}"},"SharedScope":"shared","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"RemoveHypervisorDatastoreImpl\" and Version eq 2"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"}]